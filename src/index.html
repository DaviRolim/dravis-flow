<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DraVis Flow</title>
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="./main.js" defer></script>
  </head>
  <body class="theme-cyberpunk">
    <main id="setup" class="setup hidden">
      <header class="window-head">
        <div class="window-lights" aria-hidden="true">
          <span class="light light-red"></span>
          <span class="light light-yellow"></span>
          <span class="light light-green"></span>
        </div>

        <div class="window-title">
          <p class="eyebrow">Voice Console</p>
          <h1>DraVis Flow</h1>
          <p class="lead">Control your local Whisper recording pipeline.</p>
        </div>
      </header>

      <section class="panel">
        <h2>Recording Mode</h2>
        <p class="panel-copy">Choose how the global hotkey behaves.</p>

        <div id="mode-switch" class="mode-switch" role="radiogroup" aria-label="Recording mode">
          <button id="mode-hold" class="mode-btn" type="button" data-mode="hold" role="radio">
            <span class="mode-title">Hold to talk</span>
            <span class="mode-copy">Hold hotkey to record, release to transcribe.</span>
          </button>
          <button id="mode-toggle" class="mode-btn" type="button" data-mode="toggle" role="radio">
            <span class="mode-title">Toggle recording</span>
            <span class="mode-copy">Press hotkey once to start, once to stop.</span>
          </button>
        </div>

        <p id="mode-status" class="mode-status">Loading recording mode...</p>
      </section>

      <section class="panel">
        <h2>Whisper Model</h2>
        <p class="panel-copy">Larger models are more accurate but use more memory.</p>
        <div id="model-switch" class="mode-switch" role="radiogroup" aria-label="Whisper model">
          <button class="mode-btn" type="button" data-model="base.en" role="radio">
            <span class="mode-title">Base — 142 MB</span>
            <span class="mode-copy">Fast, good for simple dictation.</span>
          </button>
          <button class="mode-btn" type="button" data-model="small.en" role="radio">
            <span class="mode-title">Small — 466 MB</span>
            <span class="mode-copy">Better accuracy, handles accents.</span>
          </button>
          <button class="mode-btn" type="button" data-model="large-v3-turbo" role="radio">
            <span class="mode-title">Large Turbo — 809 MB</span>
            <span class="mode-copy">Best quality. Cleans stutters and fillers.</span>
          </button>
        </div>
        <p id="model-status" class="mode-status">Loading selected model...</p>
      </section>

      <section class="panel">
        <h2>Model Status</h2>
        <p id="setup-message">Checking local model...</p>
        <button id="download-btn" class="primary hidden">Download Model</button>
        <div id="progress-wrap" class="progress-wrap hidden">
          <div class="progress-track">
            <div id="progress" class="progress-bar"></div>
          </div>
          <span id="progress-text">0%</span>
        </div>
      </section>

      <p id="hotkey-hint" class="hint">Hotkey: <code>Ctrl+Shift+Space</code></p>
    </main>

    <main id="widget" class="widget-root hidden" aria-live="polite">
      <div class="recording-pill hold-mode" id="recording-pill">
        <button id="cancel-btn" class="widget-btn widget-btn-ghost" type="button" aria-label="Cancel recording">
          <span aria-hidden="true">&times;</span>
        </button>

        <div class="waveform-wrap">
          <div class="waveform" id="waveform" aria-hidden="true"></div>
        </div>

        <button id="stop-btn" class="widget-btn widget-btn-stop" type="button" aria-label="Stop recording">
          <span class="stop-square" aria-hidden="true"></span>
        </button>
      </div>
    </main>
  </body>
</html>
